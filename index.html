<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--
        Changelog: Beta v1.11 (Aligned with PRD v1.07 Concepts)
        - PRD Alignment: Updated to match PRD v1.07 structure and terminology.
        - Data Source: App structured for individual JSON files (`cards/{category}/[Prefix]-ID-Name.json`).
        - Central DB Simulation: `state.db` represents the compiled `cards/cards-db.json`.
        - Sync Process: "Sync Library" simulates scanning JSON files and updating the central DB.
        - Tiered Unlocking System: Cards have a `level` (1: Discovered, 2: In Progress, 3: Mastered).
        - Interactive Quiz: Implemented to allow leveling up cards.
        - Dynamic Modal Actions: Buttons change based on the card's current `level`.
        - Visual Feedback: Card borders and labels update based on `level`.
    -->
    <title>Nexus Cards - Beta v1.11 (PRD v1.07)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a18;
            position: relative;
            overflow-x: hidden;
        }
        /* Animated Nebula Background */
        body::before, body::after {
            content: '';
            position: absolute;
            inset: -150px;
            z-index: -1;
            background-repeat: no-repeat;
            animation: move-nebula 45s infinite linear;
        }
        body::before {
            background-image:
                radial-gradient(ellipse at 33% 45%, #5a2a88, transparent),
                radial-gradient(ellipse at 80% 30%, #2a5a88, transparent),
                radial-gradient(ellipse at 60% 80%, #882a5a, transparent);
             opacity: 0.3;
        }
        body::after {
             background-image:
                radial-gradient(ellipse at 20% 70%, #2a885a, transparent),
                radial-gradient(ellipse at 50% 25%, #885a2a, transparent),
                radial-gradient(ellipse at 90% 65%, #2a8888, transparent);
            animation-direction: reverse;
            animation-duration: 35s;
            opacity: 0.3;
        }
        @keyframes move-nebula {
            0% { transform: rotate(0deg) translateX(10%) translateY(5%) scale(1); }
            50% { transform: rotate(180deg) translateX(-15%) translateY(-10%) scale(1.2); }
            100% { transform: rotate(360deg) translateX(10%) translateY(5%) scale(1); }
        }
        .perspective-container { perspective: 1000px; }
        .nexus-card {
            transform-style: preserve-3d;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s ease, border 0.3s ease;
        }
        .perspective-container:hover .nexus-card {
            transform: rotateY(var(--rotateY)) rotateX(var(--rotateX)) scale3d(1.05, 1.05, 1.05);
        }
        .warframe-glare { position: relative; overflow: hidden; }
        .warframe-glare::before {
            content: ''; position: absolute; width: 100%; height: 100%; top: 0; left: 0;
            background: linear-gradient(110deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0) 60%);
            transform: translateX(-100%); animation: glare-animation 3s infinite ease-in-out;
        }
        @keyframes glare-animation { 0% { transform: translateX(-100%); } 50% { transform: translateX(100%); } 100% { transform: translateX(100%); } }
        /* Card Level Styles (Aligns with PRD v1.07) */
        .level-2-border {
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.7); /* Purple pulse */
            border: 2px solid rgba(124, 58, 237, 0.8);
        }
        .level-3-border { /* EPIC/MASTERED Card Styling */
             border: 2px solid; border-image-slice: 1; border-width: 2px;
             border-image-source: linear-gradient(to left, #f7b733, #fc4a1a);
             animation: epic-glow 2s infinite alternate;
        }
        @keyframes epic-glow {
            from { box-shadow: 0 0 5px #fc4a1a, 0 0 10px #f7b733; }
            to { box-shadow: 0 0 20px #fc4a1a, 0 0 30px #f7b733; }
        }
        /* Card Flip Styles */
        .modal-card-inner { transition: transform 0.6s; transform-style: preserve-3d; }
        .modal-card.is-flipped .modal-card-inner { transform: rotateY(180deg); }
        .modal-card-front, .modal-card-back {
            position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden;
        }
        .modal-card-back { transform: rotateY(180deg); }
        /* Quiz Styles */
        .quiz-option { transition: background-color 0.2s; }
        .quiz-option.selected { background-color: #4c1d95; /* Dark purple */ }
        .quiz-option.correct { background-color: #166534; /* Green */ }
        .quiz-option.incorrect { background-color: #991b1b; /* Red */ }
    </style>
</head>
<body class="text-gray-200 min-h-screen">
    <!-- Main View (Dashboard & Library) -->
    <div id="main-view" class="relative z-10">
        <div class="container mx-auto p-4 md:p-8">
            <header class="flex justify-between items-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold tracking-wider text-white">NEXUS CARDS</h1>
                <div id="player-level-display" class="text-right"></div>
            </header>
            <div class="bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-lg mb-8 text-center">
                <h2 class="text-xl font-semibold mb-3">Curator's Dashboard</h2>
                <p class="text-gray-400 mb-4">Manage your collection. Add `.json` files to `/cards/{category}/`.</p>
                <button id="sync-library-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-md transition-colors duration-300">Sync Library</button>
                 <p id="sync-status" class="text-sm text-gray-400 mt-2 h-4"></p>
            </div>
            <!-- KPIs aligned with PRD v1.07 focus -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Total Cards</h3><p id="kpi-total-cards" class="text-3xl font-bold">0</p></div>
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Cards Mastered</h3><p id="kpi-cards-mastered" class="text-3xl font-bold">0</p></div>
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Mastery Rate</h3><p id="kpi-mastery-rate" class="text-3xl font-bold">0%</p></div>
            </div>
            <main>
                <h2 class="text-2xl font-bold mb-4">Card Library</h2>
                <div id="card-library" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                    <div id="loading-spinner" class="col-span-full text-center p-10"><p class="text-lg">Syncing Nexus Library...</p></div>
                </div>
            </main>
        </div>
    </div>

    <!-- Card Detail Modal (Flippable) -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center hidden z-50 p-4">
        <div id="modal-content-area" class="w-full max-w-2xl relative">
            <div class="modal-card w-full aspect-[16/9]" style="perspective: 2000px;">
                <div class="modal-card-inner relative w-full h-full">
                    <!-- Front of the Card -->
                    <div class="modal-card-front bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h2 id="modal-title" class="text-2xl font-bold"></h2>
                            <button id="modal-close-btn" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
                        </div>
                        <div class="flex flex-col md:flex-row gap-6">
                            <img id="modal-img" src="" alt="Card Art" class="w-full md:w-1/3 object-cover rounded-md">
                            <div class="flex-1">
                                <h3 class="font-semibold text-lg mb-2">Summary</h3>
                                <p id="modal-summary" class="text-gray-300 text-sm"></p>
                            </div>
                        </div>
                    </div>
                    <!-- Back of the Card (Course Intel) -->
                    <div class="modal-card-back bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-6 flex flex-col justify-between">
                         <div>
                            <h3 id="modal-back-title" class="text-xl font-bold mb-4">Course Intel</h3>
                            <div id="modal-back-content" class="space-y-2"></div>
                         </div>
                         <!-- Action buttons that change based on card level -->
                         <div id="modal-action-buttons" class="mt-4 flex flex-col sm:flex-row gap-2"></div>
                    </div>
                </div>
            </div>
            <button id="flip-card-btn" class="absolute -bottom-12 left-1/2 -translate-x-1/2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Flip Card</button>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-md flex justify-center items-center hidden z-50 p-4">
        <div id="quiz-content" class="bg-gray-900 rounded-lg shadow-2xl p-8 w-full max-w-3xl text-white">
            <h2 id="quiz-title" class="text-2xl font-bold mb-6"></h2>
            <div id="quiz-questions-area"></div>
            <div class="mt-6 flex justify-between items-center">
                <button id="quiz-submit-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md">Submit Answers</button>
                <p id="quiz-result-text" class="text-lg font-semibold"></p>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- CONFIGURATION (Aligned with PRD v1.07) ---
        const config = {
            playerAge: 42, // As per PRD, for level capping
            ownerId: 'SudoDev' // Static owner ID for MVP
            // dbPath: './cards/cards-db.json' // Future: Path for real JSON file loading
        };

        // --- APPLICATION STATE ---
        // state.allCardData: Simulates data loaded from individual `/cards/{category}/[Prefix]-ID-Name.json` files.
        // state.db: Simulates the central `cards/cards-db.json` registry used by the dashboard.
        const state = {
            allCardData: {}, // Holds full data (including quizzes) keyed by card ID
            db: [],          // Simplified list for dashboard rendering
            playerXP: 0,
            trueLevel: 1,
            currentCardId: null,  // ID of the card currently shown in the detail modal
            currentQuiz: null     // Holds data for the quiz currently in progress
        };

        // --- DOM ELEMENT REFERENCES ---
        const syncLibraryBtn = document.getElementById('sync-library-btn');
        const syncStatus = document.getElementById('sync-status');
        const cardLibrary = document.getElementById('card-library');
        const loadingSpinner = document.getElementById('loading-spinner');
        const kpiTotal = document.getElementById('kpi-total-cards');
        const kpiMastered = document.getElementById('kpi-cards-mastered'); // Renamed from 'Guides Created'
        const kpiRate = document.getElementById('kpi-mastery-rate');
        const playerLevelDisplay = document.getElementById('player-level-display');
        // Modal elements
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalSummary = document.getElementById('modal-summary');
        const modalImg = document.getElementById('modal-img');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const flipCardBtn = document.getElementById('flip-card-btn');
        const modalCard = modal.querySelector('.modal-card');
        const modalBackTitle = document.getElementById('modal-back-title');
        const modalBackContent = document.getElementById('modal-back-content');
        const modalActionButtons = document.getElementById('modal-action-buttons');
        // Quiz Modal elements
        const quizModal = document.getElementById('quiz-modal');
        const quizTitle = document.getElementById('quiz-title');
        const quizQuestionsArea = document.getElementById('quiz-questions-area');
        const quizSubmitBtn = document.getElementById('quiz-submit-btn');
        const quizResultText = document.getElementById('quiz-result-text');

        /**
         * SIMULATES the file sync process described in PRD v1.07.
         * In a real app, this would scan `/cards/health/`, `/cards/wealth/`, `/cards/relationships/`,
         * read all `*.json` files, and compile/update `cards/cards-db.json`.
         * For this prototype, it loads sample data representing those individual JSON files.
         */
        function simulateFileSync() {
            syncStatus.textContent = 'Scanning directories...';
            // This simulates reading data from individual JSON files
            const foundFilesData = getSampleIndividualCardJSONs();
            state.allCardData = {}; // Reset
            const newDbEntries = []; // Reset

            foundFilesData.forEach(cardData => {
                // Store the full data for later use (like quizzes, full guides)
                state.allCardData[cardData.id] = cardData;
                // Create the simplified entry for our dashboard's "cards-db.json" equivalent (state.db)
                newDbEntries.push({
                    id: cardData.id,
                    cardName: cardData.cardName,
                    title: cardData.title,
                    coverArtUrl: cardData.coverArtUrl,
                    rarityScore: cardData.rarityScore,
                    status: cardData.status, // e.g., "Not Started", "In Progress", "Complete"
                    level: cardData.level,   // e.g., 1, 2, 3 (Aligned with PRD v1.07)
                    category: cardData.category,
                    summary: cardData.summary,
                    latentAbility: cardData.latentAbility,
                    docUrl: cardData.docUrl // Link to full guide
                    // guidePath could be added here if static HTML guides are generated
                });
            });

            state.db = newDbEntries; // Update the central registry simulation
            syncStatus.textContent = `Sync complete. ${state.db.length} cards loaded.`;
            // Clear status message after delay
            setTimeout(() => {
                if (syncStatus.textContent === `Sync complete. ${state.db.length} cards loaded.`) {
                     syncStatus.textContent = '';
                }
            }, 4000);
            render();
        }

        /**
         * Renders all parts of the application based on the current state.
         */
        function render() {
            if (state.db.length > 0) {
                loadingSpinner.style.display = 'none';
            } else {
                loadingSpinner.innerHTML = `<p>No cards found. Click "Sync Library" to begin.</p>`;
            }
            cardLibrary.innerHTML = '';
            calculatePlayerLevel();
            renderDashboard();
            renderCards();
        }

        /**
         * Calculates player level based on cards mastered (Aligned with PRD v1.07).
         */
        function calculatePlayerLevel() {
            // XP is granted for reaching Level 3 (Mastered)
            const masteredCards = state.db.filter(card => card.level === 3).length;
            state.playerXP = masteredCards * 100; // 100 XP per mastered card
            state.trueLevel = Math.floor(state.playerXP / 100) + 1; // Start at level 1
        }

        /**
         * Updates the KPI displays and player level on the dashboard.
         */
        function renderDashboard() {
            const totalCards = state.db.length;
            // Align KPI with PRD v1.07's "Mastery" concept
            const cardsMastered = state.db.filter(card => card.level === 3).length;
            const masteryRate = totalCards > 0 ? Math.round((cardsMastered / totalCards) * 100) : 0;

            kpiTotal.textContent = totalCards;
            kpiMastered.textContent = cardsMastered; // Use "Mastered" count
            kpiRate.textContent = `${masteryRate}%`;

            const displayLevel = Math.min(state.trueLevel, config.playerAge);
            playerLevelDisplay.innerHTML = `
                <div class="font-bold text-2xl text-purple-400">LVL ${displayLevel}</div>
                <div class="text-xs text-gray-500">True Lvl: ${state.trueLevel}</div>
            `;
        }

        /**
         * Renders the Nexus Cards into the library grid.
         */
        function renderCards() {
            state.db.forEach(card => {
                const cardContainer = document.createElement('div');
                cardContainer.className = 'perspective-container';

                // Determine border style based on card level (PRD v1.07)
                let borderClass = 'border border-gray-700'; // Default for Level 1
                if (card.level === 2) borderClass = 'level-2-border';
                if (card.level === 3) borderClass = 'level-3-border';

                // Determine status/level label text
                let statusLabel = `<span class="text-gray-500">Level ${card.level}</span>`;
                if (card.level === 3) {
                    statusLabel = `<span class="font-bold text-yellow-300 tracking-widest">:: MASTERED ::</span>`;
                }

                cardContainer.innerHTML = `
                    <div class="nexus-card w-full aspect-[2.5/3.5] bg-gray-900/60 rounded-lg shadow-xl p-3 flex flex-col justify-between warframe-glare ${borderClass}">
                        <div class="flex justify-between items-start text-xs">
                            <span class="font-bold text-white truncate pr-2">${card.cardName}</span>
                            <span class="font-black text-yellow-400">${card.rarityScore}</span>
                        </div>
                        <div class="flex-grow my-2 flex items-center justify-center">
                            <img src="${card.coverArtUrl}" alt="${card.cardName}" class="max-h-full max-w-full object-contain rounded-md">
                        </div>
                        <div class="text-center text-xs">
                           ${statusLabel}
                        </div>
                    </div>
                `;
                cardContainer.addEventListener('click', () => openModal(card.id));
                add3dHoverEffect(cardContainer);
                cardLibrary.appendChild(cardContainer);
            });
        }

        /**
         * Opens the detailed modal for a specific card.
         */
        function openModal(cardId) {
            state.currentCardId = cardId;
            // Find card data in our central registry simulation
            const card = state.db.find(c => c.id === cardId);
            if (!card) {
                console.error("Card not found in DB:", cardId);
                return;
            }

            // Populate Front of Card
            modalTitle.textContent = card.cardName;
            modalSummary.textContent = card.summary || 'No summary available.';
            modalImg.src = card.coverArtUrl;

            // Populate Back of Card (Intel)
            modalBackTitle.textContent = `${card.cardName} - Intel`;
            // Display Latent Ability based on level
            let latentAbilityHTML = card.level === 3
                ? `<p class="text-sm text-yellow-300"><span class="font-bold">Latent Ability:</span> ${card.latentAbility}</p>`
                : `<p class="text-sm text-gray-500"><span class="font-bold">Latent Ability:</span> [Locked - Reach Level 3]</p>`;

            modalBackContent.innerHTML = `
                <p class="text-sm"><span class="font-bold">Level:</span> ${card.level} (${card.status})</p>
                <p class="text-sm"><span class="font-bold">Rarity:</span> ${card.rarityScore}</p>
                <p class="text-sm"><span class="font-bold">Category:</span> ${card.category}</p>
                ${latentAbilityHTML}
                <!-- Future: Add more detailed stats (Insight, Clarity, Rarity) here if needed -->
            `;

            // Populate Action Buttons based on card level (Aligned with PRD v1.07 workflow)
            modalActionButtons.innerHTML = ''; // Clear previous buttons
            if (card.level === 1) {
                const quizBtn = createModalButton('Take Quiz: Level 1', 'bg-green-600', () => startQuiz(card.id, 1));
                modalActionButtons.appendChild(quizBtn);
            } else if (card.level === 2) {
                // For Level 2, user can review guide and take the next quiz
                const guideBtn = createModalButton('View Full Guide', 'bg-blue-600', () => window.open(card.docUrl, '_blank'));
                const quizBtn = createModalButton('Take Quiz: Level 2', 'bg-green-600', () => startQuiz(card.id, 2));
                // Order: Guide first, then quiz
                modalActionButtons.appendChild(guideBtn);
                modalActionButtons.appendChild(quizBtn);
            } else if (card.level === 3) {
                // For Level 3 (Mastered), primary action is viewing the guide
                const guideBtn = createModalButton('View Full Guide', 'bg-blue-600', () => window.open(card.docUrl, '_blank'));
                modalActionButtons.appendChild(guideBtn);
                // Could add other actions for mastered cards here in future
            }

            // Reset flip state and show modal
            modalCard.classList.remove('is-flipped');
            modal.classList.remove('hidden');
        }

        /**
         * Helper to create styled buttons for the modal.
         */
        function createModalButton(text, bgColorClass, onClickHandler) {
            const btn = document.createElement('button');
            btn.textContent = text;
            // Use Tailwind classes for styling, ensure it's responsive
            btn.className = `${bgColorClass} hover:opacity-80 text-white font-bold py-2 px-4 rounded-md transition-colors duration-300 flex-1`;
            btn.onclick = onClickHandler;
            return btn;
        }

        /**
         * Closes the main card detail modal.
         */
        function closeModal() {
            modal.classList.add('hidden');
            state.currentCardId = null;
        }

        /**
         * Starts the quiz process for a given card and level.
         */
        function startQuiz(cardId, level) {
            closeModal(); // Close the card detail modal first
            // Retrieve the full card data which contains the quiz questions
            const fullCardData = state.allCardData[cardId];
            // Select the correct quiz data based on level
            const quizData = level === 1 ? fullCardData.quizLevel1 : fullCardData.quizLevel2;

            if (!quizData || !quizData.questions || quizData.questions.length === 0) {
                alert('Quiz data not found or is empty for this level.');
                return;
            }

            // Store current quiz state
            state.currentQuiz = { cardId, level, questions: quizData.questions };

            // Populate Quiz Modal UI
            quizTitle.textContent = `${fullCardData.cardName} - Quiz Level ${level}`;
            quizQuestionsArea.innerHTML = ''; // Clear previous questions
            quizResultText.textContent = ''; // Clear previous results
            quizResultText.className = 'text-lg font-semibold'; // Reset result text style
            quizSubmitBtn.disabled = false;

            // Dynamically create quiz questions
            quizData.questions.forEach((q, index) => {
                const questionEl = document.createElement('div');
                questionEl.className = 'mb-6';

                // Create HTML for answer options
                let optionsHTML = q.options.map((opt, i) => `
                    <div class="quiz-option p-3 border border-gray-700 rounded-md cursor-pointer hover:bg-gray-700" data-q-index="${index}" data-opt-index="${i}">
                        <span class="font-bold mr-2">${String.fromCharCode(65 + i)}:</span> ${opt}
                    </div>
                `).join('');

                questionEl.innerHTML = `
                    <p class="font-semibold mb-3">${index + 1}. ${q.text}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">${optionsHTML}</div>
                `;
                quizQuestionsArea.appendChild(questionEl);
            });

            // Add interactivity to quiz options (select one per question)
            quizQuestionsArea.querySelectorAll('.quiz-option').forEach(el => {
                el.addEventListener('click', (e) => {
                    const qIndex = e.currentTarget.dataset.qIndex;
                    // Deselect other options for the same question
                    quizQuestionsArea.querySelectorAll(`.quiz-option[data-q-index="${qIndex}"]`).forEach(opt => opt.classList.remove('selected'));
                    // Select the clicked option
                    e.currentTarget.classList.add('selected');
                });
            });

            // Show the quiz modal
            quizModal.classList.remove('hidden');
        }

        /**
         * Handles quiz submission and grading.
         */
        function submitQuiz() {
             if (!state.currentQuiz) return;

            const { cardId, level, questions } = state.currentQuiz;
            let score = 0;

            // Grade each question
            questions.forEach((q, qIndex) => {
                // Find all options and the selected one for this question
                const options = quizQuestionsArea.querySelectorAll(`.quiz-option[data-q-index="${qIndex}"]`);
                const selectedOption = quizQuestionsArea.querySelector(`.quiz-option[data-q-index="${qIndex}"].selected`);

                if (!selectedOption) return; // Skip if no answer was selected

                // Get the text of the selected answer
                const selectedAnswerIndex = selectedOption.dataset.optIndex;
                const selectedAnswer = q.options[selectedAnswerIndex];
                const correctAnswer = q.correct;

                // Remove selection highlight for clarity
                options.forEach(opt => opt.classList.remove('Okay, I understand. You want to take the structure, look, and feel of the provided HTML file (`Pasted_Text_1753363938547.txt`, which is Beta v1.11 and aligns with PRD v1.07 concepts) as the base for the current state of the Nexus Cards application.

This means:

1.  **UI/UX:** Adopt the deep space nebula background, card design (including level-based borders), 3D tilt effect, and card flip animation from this file.
2.  **Functionality:** Use the core logic for the dashboard (KPIs, card grid), modal interaction (flip, dynamic buttons), and the simulated sync/library loading mechanism as a starting point.
3.  **Data Handling:** Initially, continue using the `simulateFileSync` and `getSampleIndividualCardJSONs` functions to mimic loading data from local JSON files, just like the provided file does.
4.  **PRD Alignment:** Ensure the structure and naming conventions (like `cards/health/`, `cards/wealth/`, `[HM]-...`) are reflected in the code comments and planned file structure, even if the actual file reading isn't implemented yet.

I will provide the files (`index.html`, `style.css`, `script.js`, `README.md`) based on this, keeping the design and core interactions from the pasted file, and setting the stage for the PRD v1.07 features (like actual JSON file loading and the 3-level system, which are simulated in the paste).

Here are the files:

### 1. `index.html`

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Cards - Beta v1.11 (Simplified Base)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-gray-200 min-h-screen">
    <!-- Main View (Dashboard & Library) -->
    <div id="main-view" class="relative z-10">
        <div class="container mx-auto p-4 md:p-8">
            <header class="flex justify-between items-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold tracking-wider text-white">NEXUS CARDS</h1>
                <div id="player-level-display" class="text-right"></div>
            </header>
            <div class="bg-gray-800/50 backdrop-blur-sm p-6 rounded-lg shadow-lg mb-8 text-center">
                <h2 class="text-xl font-semibold mb-3">Curator's Dashboard</h2>
                <p class="text-gray-400 mb-4">Manage your collection. Create new `.json` files in the `/cards` subdirectories.</p>
                <button id="sync-library-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-md transition-colors duration-300">Sync Library</button>
                 <p id="sync-status" class="text-sm text-gray-400 mt-2 h-4"></p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Total Cards</h3><p id="kpi-total-cards" class="text-3xl font-bold">0</p></div>
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Cards Mastered</h3><p id="kpi-cards-mastered" class="text-3xl font-bold">0</p></div>
                <div class="bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg shadow-lg text-center"><h3 class="text-gray-400 text-sm font-medium">Mastery Rate</h3><p id="kpi-mastery-rate" class="text-3xl font-bold">0%</p></div>
            </div>
            <main>
                <h2 class="text-2xl font-bold mb-4">Card Library</h2>
                <div id="card-library" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                    <div id="loading-spinner" class="col-span-full text-center p-10"><p class="text-lg">Syncing Nexus Library...</p></div>
                </div>
            </main>
        </div>
    </div>
    <!-- Card Detail Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex justify-center items-center hidden z-50 p-4">
        <div id="modal-content-area" class="w-full max-w-2xl relative">
            <div class="modal-card w-full aspect-[16/9]" style="perspective: 2000px;">
                <div class="modal-card-inner relative w-full h-full">
                    <!-- Front of the Card -->
                    <div class="modal-card-front bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h2 id="modal-title" class="text-2xl font-bold"></h2>
                            <button id="modal-close-btn" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
                        </div>
                        <div class="flex flex-col md:flex-row gap-6">
                            <img id="modal-img" src="" alt="Card Art" class="w-full md:w-1/3 object-cover rounded-md">
                            <div class="flex-1">
                                <h3 class="font-semibold text-lg mb-2">Summary</h3>
                                <p id="modal-summary" class="text-gray-300 text-sm"></p>
                            </div>
                        </div>
                    </div>
                    <!-- Back of the Card -->
                    <div class="modal-card-back bg-gray-800 border border-gray-700 rounded-lg shadow-2xl p-6 flex flex-col justify-between">
                         <div>
                            <h3 id="modal-back-title" class="text-xl font-bold mb-4">Course Intel</h3>
                            <div id="modal-back-content" class="space-y-2"></div>
                         </div>
                         <div id="modal-action-buttons" class="mt-4 flex flex-col sm:flex-row gap-2"></div>
                    </div>
                </div>
            </div>
            <button id="flip-card-btn" class="absolute -bottom-12 left-1/2 -translate-x-1/2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded">Flip Card</button>
        </div>
    </div>
    <!-- Quiz Modal -->
    <div id="quiz-modal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-md flex justify-center items-center hidden z-50 p-4">
        <div id="quiz-content" class="bg-gray-900 rounded-lg shadow-2xl p-8 w-full max-w-3xl text-white">
            <h2 id="quiz-title" class="text-2xl font-bold mb-6"></h2>
            <div id="quiz-questions-area"></div>
            <div class="mt-6 flex justify-between items-center">
                <button id="quiz-submit-btn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md">Submit Answers</button>
                <p id="quiz-result-text" class="text-lg font-semibold"></p>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
